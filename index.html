<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Wumpus World - AI Knowledge Analysis</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.4.0/p5.min.js"></script>
  <link rel="stylesheet" href="css/main.css">
</head>
<body>
  <div class="main-container">
    <!-- Agent's Knowledge Grid -->
    <div class="grid-panel">
      <div class="grid-title">🤖 Agent's Knowledge</div>
      <div class="canvas-container" id="agent-canvas-container">
        <!-- Agent's POV canvas will be created here -->
      </div>
      <div class="legend">
        <div class="legend-item">
          <div class="legend-color legend-visited"></div>
          <span>Visited</span>
        </div>
        <div class="legend-item">
          <div class="legend-color legend-safe"></div>
          <span>Safe (Deduced)</span>
        </div>
        <div class="legend-item">
          <div class="legend-color legend-dangerous"></div>
          <span>Dangerous</span>
        </div>
        <div class="legend-item">
          <div class="legend-color legend-unknown"></div>
          <span>Unknown</span>
        </div>
        <div class="legend-item">
          <div class="legend-color legend-agent"></div>
          <span>Agent</span>
        </div>
        <div class="legend-item">
          <div class="legend-color legend-stench"></div>
          <span>Stench</span>
        </div>
        <div class="legend-item">
          <div class="legend-color legend-breeze"></div>
          <span>Breeze</span>
        </div>
      </div>
    </div>
    
    <!-- Full Map Grid -->
    <div class="grid-panel">
      <div class="grid-title">🌍 Complete World Map</div>
      <div class="canvas-container" id="full-canvas-container">
        <!-- Full map canvas will be created here -->
      </div>
      <div class="legend">
        <div class="legend-item">
          <div class="legend-color legend-wumpus"></div>
          <span>Wumpus</span>
        </div>
        <div class="legend-item">
          <div class="legend-color legend-pit"></div>
          <span>Pit</span>
        </div>
        <div class="legend-item">
          <div class="legend-color legend-gold"></div>
          <span>Gold</span>
        </div>
        <div class="legend-item">
          <div class="legend-color legend-agent"></div>
          <span>Agent</span>
        </div>
        <div class="legend-item">
          <div class="legend-color legend-visited"></div>
          <span>Visited</span>
        </div>
        <div class="legend-item">
          <div class="legend-color legend-stench"></div>
          <span>Stench</span>
        </div>
        <div class="legend-item">
          <div class="legend-color legend-breeze"></div>
          <span>Breeze</span>
        </div>
      </div>
    </div>
    
    <!-- AI Knowledge Panel -->
    <div class="knowledge-panel">
      <div class="grid-title">🧠 AI Analysis</div>
      
      <!-- World Loading Options -->
      <div class="world-options">
        <div class="section-title">🌍 World Setup</div>
        <div class="radio-group">
          <label class="radio-option">
            <input type="radio" name="worldType" value="random" checked>
            <span>Random World</span>
          </label>
          <label class="radio-option">
            <input type="radio" name="worldType" value="custom">
            <span>Custom World</span>
          </label>
        </div>
        
        <div id="file-input-container" class="file-input-container" style="display: none;">
          <label for="world-file" class="file-label">
            📁 Choose World File (.txt)
          </label>
          <input type="file" id="world-file" accept=".txt" class="file-input">
          <div class="file-format-info">
            <strong>Format:</strong> 5x5 grid using:<br>
            <code>W</code> = Wumpus, <code>P</code> = Pit, <code>G</code> = Gold, <code>-</code> = Empty
          </div>
        </div>
        
        <button class="btn btn-load" onclick="loadWorld()">🔄 Load World</button>
      </div>
      
      <div class="controls">
        <button class="btn btn-start" onclick="startAI()">▶ Start</button>
        <button class="btn btn-stop" onclick="stopAI()">⏹ Stop</button>
        <button class="btn btn-reset" onclick="resetAI()">🔄 Reset</button>
      </div>
      
      <div class="status-section">
        <div class="section-title">📊 Current Status</div>
        <div id="status-content">
          <div>Step: <span id="step-count">0</span></div>
          <div>Position: <span id="agent-position">(0, 0)</span></div>
          <div>Direction: <span id="agent-direction">Right</span></div>
          <div>Has Arrow: <span id="has-arrow">Yes</span></div>
          <div>Gold Collected: <span id="gold-collected">0</span></div>
          <div>Agent Alive: <span id="agent-alive">Yes</span></div>
        </div>
      </div>
      
      <div class="status-section">
        <div class="section-title">👁️ Current Percepts</div>
        <div id="percepts-content">
          <div>Stench: <span id="stench-status">No</span></div>
          <div>Breeze: <span id="breeze-status">No</span></div>
          <div>Glitter: <span id="glitter-status">No</span></div>
        </div>
      </div>
      
      <div class="decisions-section">
        <div class="section-title">🧠 AI Reasoning</div>
        <div id="decisions-content">
          <div style="color: #9ca3af; font-style: italic;">Ready to start AI analysis...</div>
        </div>
      </div>
      
      <div class="status-section">
        <div class="section-title">🗺️ Knowledge Base</div>
        <div id="knowledge-content">
          <div>Safe Rooms: <span id="safe-rooms">[(0,0)]</span></div>
          <div>Dangerous Rooms: <span id="dangerous-rooms">[]</span></div>
          <div>Unknown Rooms: <span id="unknown-rooms">[]</span></div>
        </div>
      </div>
    </div>
  </div>

  <!-- Load scripts in order -->
  <script src="js/ui-manager.js"></script>
  <script src="scripts/room.js"></script>
  <script src="scripts/agent.js"></script>
  <script src="scripts/world.js"></script>
  <script src="scripts/wumpus.js"></script>
  <script src="scripts/pit.js"></script>
  <script src="scripts/gold.js"></script>
  <script src="scripts/stench.js"></script>
  <script src="scripts/breeze.js"></script>
  <script src="scripts/astar.js"></script>
  <script src="scripts/ai.js"></script>
  <script src="scripts/simulate.js"></script>
  <script src="scripts/sketch.js"></script>
</body>
</html>